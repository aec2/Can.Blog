"use strict";(self.webpackChunkBlog=self.webpackChunkBlog||[]).push([[475],{5475:(Fe,G,l)=>{l.r(G),l.d(G,{ACCOUNT_CONFIG_OPTIONS:()=>T,ACCOUNT_EDIT_FORM_PROP_CONTRIBUTORS:()=>I,AccountExtensionsGuard:()=>D,AccountModule:()=>Ie,AuthenticationFlowGuard:()=>Y,ChangePasswordComponent:()=>q,DEFAULT_ACCOUNT_FORM_PROPS:()=>oe,ForgotPasswordComponent:()=>x,LoginComponent:()=>U,ManageProfileComponent:()=>R,ManageProfileStateService:()=>P,PersonalSettingsComponent:()=>F,PersonalSettingsHalfRowComponent:()=>C,RE_LOGIN_CONFIRMATION_TOKEN:()=>M,RegisterComponent:()=>E,ResetPasswordComponent:()=>z});var A,a=l(6973),u=l(6104),e=l(2223),se=l(5434),p=l(4115),g=l(672),d=(()=>((d=d||{})[d.Success=1]="Success",d[d.InvalidUserNameOrPassword=2]="InvalidUserNameOrPassword",d[d.NotAllowed=3]="NotAllowed",d[d.LockedOut=4]="LockedOut",d[d.RequiresTwoFactor=5]="RequiresTwoFactor",d))();(0,a.Uoq)(d),(A=class{constructor(r){this.restService=r,this.apiName="AbpAccount",this.checkPasswordByLogin=s=>this.restService.request({method:"POST",url:"/api/account/check-password",body:s},{apiName:this.apiName}),this.loginByLogin=s=>this.restService.request({method:"POST",url:"/api/account/login",body:s},{apiName:this.apiName}),this.logout=()=>this.restService.request({method:"GET",url:"/api/account/logout"},{apiName:this.apiName})}}).\u0275fac=function(r){return new(r||A)(e.LFG(a.vgb))},A.\u0275prov=e.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"});let L=(()=>{var t;class r{constructor(o){this.restService=o,this.apiName="AbpAccount",this.register=n=>this.restService.request({method:"POST",url:"/api/account/register",body:n},{apiName:this.apiName}),this.resetPassword=n=>this.restService.request({method:"POST",url:"/api/account/reset-password",body:n},{apiName:this.apiName}),this.sendPasswordResetCode=n=>this.restService.request({method:"POST",url:"/api/account/send-password-reset-code",body:n},{apiName:this.apiName})}}return(t=r).\u0275fac=function(o){return new(o||t)(e.LFG(a.vgb))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),r})(),N=(()=>{var t;class r{constructor(o){this.restService=o,this.apiName="AbpAccount",this.changePassword=n=>this.restService.request({method:"POST",url:"/api/account/my-profile/change-password",body:n},{apiName:this.apiName}),this.get=()=>this.restService.request({method:"GET",url:"/api/account/my-profile"},{apiName:this.apiName}),this.update=n=>this.restService.request({method:"PUT",url:"/api/account/my-profile",body:n},{apiName:this.apiName})}}return(t=r).\u0275fac=function(o){return new(o||t)(e.LFG(a.vgb))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();var i=l(5030),v=l(8746),Q=l(262),pe=l(9300),de=l(3900),$=l(4004),me=l(8505),h=l(4755),V=l(2843),O=l(1591),f=l(9338);function fe(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"form",2),e.NdJ("ngSubmit",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.onSubmit())}),e.TgZ(1,"p"),e._uU(2),e.ALo(3,"abpLocalization"),e.qZA(),e.TgZ(4,"div",3)(5,"label",4),e._uU(6),e.ALo(7,"abpLocalization"),e.qZA(),e.TgZ(8,"span"),e._uU(9," * "),e.qZA(),e._UZ(10,"input",5),e.qZA(),e.TgZ(11,"abp-button",6),e._uU(12),e.ALo(13,"abpLocalization"),e.qZA(),e.TgZ(14,"a",7),e._UZ(15,"i",8),e._uU(16),e.ALo(17,"abpLocalization"),e.qZA()()}if(2&t){const s=e.oxw();e.Q6J("formGroup",s.form),e.xp6(2),e.Oqu(e.lcZ(3,7,"AbpAccount::SendPasswordResetLink_Information")),e.xp6(4),e.Oqu(e.lcZ(7,9,"AbpAccount::EmailAddress")),e.xp6(5),e.Q6J("loading",s.inProgress)("disabled",null==s.form?null:s.form.invalid),e.xp6(1),e.hij(" ",e.lcZ(13,11,"AbpAccount::Submit")," "),e.xp6(4),e.Oqu(e.lcZ(17,13,"AbpAccount::Login"))}}function ge(t,r){1&t&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.TgZ(3,"a",7)(4,"button",9),e._UZ(5,"i",8),e._uU(6),e.ALo(7,"abpLocalization"),e.qZA()()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"AbpAccount::PasswordResetMailSentMessage")," "),e.xp6(5),e.hij(" ",e.lcZ(7,4,"AbpAccount::BackToLogin")," "))}function be(t,r){1&t&&(e.TgZ(0,"strong"),e._uU(1),e.ALo(2,"abpLocalization"),e.TgZ(3,"a",15),e._uU(4),e.ALo(5,"abpLocalization"),e.qZA()()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"AbpAccount::AreYouANewUser")," "),e.xp6(3),e.Oqu(e.lcZ(5,4,"AbpAccount::Register")))}function he(t,r){1&t&&(e.TgZ(0,"div",2)(1,"label",8),e._uU(2),e.ALo(3,"abpLocalization"),e.qZA(),e.TgZ(4,"span"),e._uU(5," * "),e.qZA(),e._UZ(6,"input",9),e.qZA()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"AbpIdentity::DisplayName:CurrentPassword")))}function _e(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"form",1),e.NdJ("ngSubmit",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.submit())}),e._UZ(1,"abp-extensible-form",2),e.TgZ(2,"abp-button",3),e._uU(3),e.ALo(4,"abpLocalization"),e.qZA()()}if(2&t){const s=e.oxw();e.Q6J("formGroup",s.form),e.xp6(1),e.Q6J("selectedRecord",s.selected),e.xp6(1),e.Q6J("loading",s.inProgress),e.xp6(1),e.hij(" ",e.lcZ(4,4,"AbpIdentity::Save"),"")}}const K=function(t){return{active:t}};function Ae(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"li",10),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.selectedTab=0)}),e.TgZ(1,"a",8),e._uU(2),e.ALo(3,"abpLocalization"),e.qZA()()}if(2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(4,K,0===s.selectedTab)),e.xp6(1),e.Oqu(e.lcZ(3,2,"AbpUi::ChangePassword"))}}function ve(t,r){1&t&&e._UZ(0,"abp-change-password-form")}const B=function(t){return{componentKey:t}};function Se(t,r){if(1&t&&(e.TgZ(0,"div",13)(1,"div",14)(2,"h4"),e._uU(3),e.ALo(4,"abpLocalization"),e._UZ(5,"hr"),e.qZA(),e.YNc(6,ve,1,0,"abp-change-password-form",15),e.qZA()()),2&t){const s=e.oxw(2);e.Q6J("@fadeIn",void 0),e.xp6(3),e.hij(" ",e.lcZ(4,3,"AbpIdentity::ChangePassword")," "),e.xp6(3),e.Q6J("abpReplaceableTemplate",e.VKq(5,B,s.changePasswordKey))}}function we(t,r){1&t&&e._UZ(0,"abp-personal-settings-form")}function Ze(t,r){if(1&t&&(e.TgZ(0,"div",13)(1,"div",14)(2,"h4"),e._uU(3),e.ALo(4,"abpLocalization"),e._UZ(5,"hr"),e.qZA(),e.YNc(6,we,1,0,"abp-personal-settings-form",15),e.qZA()()),2&t){const s=e.oxw(2);e.Q6J("@fadeIn",void 0),e.xp6(3),e.hij(" ",e.lcZ(4,3,"AbpIdentity::PersonalSettings")," "),e.xp6(3),e.Q6J("abpReplaceableTemplate",e.VKq(5,B,s.personalSettingsKey))}}function Te(t,r){if(1&t&&(e.TgZ(0,"div",11),e.YNc(1,Se,7,7,"div",12),e.YNc(2,Ze,7,7,"div",12),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",0===s.selectedTab),e.xp6(1),e.Q6J("ngIf",1===s.selectedTab)}}function Pe(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"form",2),e.NdJ("ngSubmit",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.onSubmit())}),e.TgZ(1,"div",3)(2,"label",4),e._uU(3),e.ALo(4,"abpLocalization"),e.qZA(),e.TgZ(5,"span"),e._uU(6," * "),e.qZA(),e._UZ(7,"input",5),e.qZA(),e.TgZ(8,"div",3)(9,"label",6),e._uU(10),e.ALo(11,"abpLocalization"),e.qZA(),e.TgZ(12,"span"),e._uU(13," * "),e.qZA(),e._UZ(14,"input",7),e.qZA(),e.TgZ(15,"div",3)(16,"label",8),e._uU(17),e.ALo(18,"abpLocalization"),e.qZA(),e.TgZ(19,"span"),e._uU(20," * "),e.qZA(),e._UZ(21,"input",9),e.qZA(),e.TgZ(22,"abp-button",10),e._uU(23),e.ALo(24,"abpLocalization"),e.qZA()()}if(2&t){const s=e.oxw();e.Q6J("formGroup",s.form),e.xp6(3),e.Oqu(e.lcZ(4,6,"AbpAccount::UserName")),e.xp6(7),e.Oqu(e.lcZ(11,8,"AbpAccount::EmailAddress")),e.xp6(7),e.Oqu(e.lcZ(18,10,"AbpAccount::Password")),e.xp6(5),e.Q6J("loading",s.inProgress),e.xp6(1),e.hij(" ",e.lcZ(24,12,"AbpAccount::Register")," ")}}function ye(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"form",2),e.NdJ("ngSubmit",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.onSubmit())}),e.TgZ(1,"p"),e._uU(2),e.ALo(3,"abpLocalization"),e.qZA(),e.TgZ(4,"div",3)(5,"label",4),e._uU(6),e.ALo(7,"abpLocalization"),e.qZA(),e.TgZ(8,"span"),e._uU(9," * "),e.qZA(),e._UZ(10,"input",5),e.qZA(),e.TgZ(11,"div",3)(12,"label",6),e._uU(13),e.ALo(14,"abpLocalization"),e.qZA(),e.TgZ(15,"span"),e._uU(16," * "),e.qZA(),e._UZ(17,"input",7),e.qZA(),e.TgZ(18,"button",8),e._uU(19),e.ALo(20,"abpLocalization"),e.qZA(),e.TgZ(21,"abp-button",9),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.onSubmit())}),e._uU(22),e.ALo(23,"abpLocalization"),e.qZA()()}if(2&t){const s=e.oxw();e.Q6J("formGroup",s.form)("mapErrorsFn",s.mapErrorsFn),e.xp6(2),e.Oqu(e.lcZ(3,8,"AbpAccount::ResetPassword_Information")),e.xp6(4),e.Oqu(e.lcZ(7,10,"AbpAccount::Password")),e.xp6(7),e.Oqu(e.lcZ(14,12,"AbpAccount::ConfirmPassword")),e.xp6(6),e.hij(" ",e.lcZ(20,14,"AbpAccount::Cancel")," "),e.xp6(2),e.Q6J("loading",s.inProgress),e.xp6(1),e.hij(" ",e.lcZ(23,16,"AbpAccount::Submit")," ")}}function Ce(t,r){1&t&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.TgZ(3,"a",10)(4,"button",11),e._uU(5),e.ALo(6,"abpLocalization"),e.qZA()()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"AbpAccount::YourPasswordIsSuccessfullyReset")," "),e.xp6(4),e.hij(" ",e.lcZ(6,4,"AbpAccount::BackToLogin")," "))}let x=(()=>{var t;class r{constructor(o,n){this.fb=o,this.accountService=n,this.isEmailSent=!1,this.form=this.fb.group({email:["",[i.Validators.required,i.Validators.email]]})}onSubmit(){this.form.invalid||(this.inProgress=!0,this.accountService.sendPasswordResetCode({email:this.form.get("email")?.value,appName:"Angular"}).pipe((0,v.x)(()=>this.inProgress=!1)).subscribe(()=>{this.isEmailSent=!0}))}}return(t=r).\u0275fac=function(o){return new(o||t)(e.Y36(i.QS),e.Y36(L))},t.\u0275cmp=e.Xpm({type:t,selectors:[["abp-forgot-password"]],decls:6,vars:5,consts:[["validateOnSubmit","",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["emailSentTemplate",""],["validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"mb-3","form-group"],["for","input-email-address",1,"form-label"],["type","email","id","input-email-address","formControlName","email",1,"form-control"],["buttonClass","mt-2 mb-3 btn btn-primary btn-block","buttonType","submit",1,"d-block",3,"loading","disabled"],["routerLink","/account/login"],["aria-hidden","true",1,"fa","fa-long-arrow-left","me-1"],[1,"d-block","mt-2","mb-3","btn","btn-primary","btn-block"]],template:function(o,n){if(1&o&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.YNc(3,fe,18,15,"form",0),e.YNc(4,ge,8,6,"ng-template",null,1,e.W1O)),2&o){const c=e.MAs(5);e.xp6(1),e.Oqu(e.lcZ(2,3,"AbpAccount::ForgotPassword")),e.xp6(2),e.Q6J("ngIf",!n.isEmailSent)("ngIfElse",c)}},dependencies:[h.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,g.rH,a.YzZ,p.hL,p.J5,u.r0,a.fuE],encapsulation:2}),r})();const T=new e.OlP("ACCOUNT_CONFIG_OPTIONS");function H(t){const r=t.get(g.gz),s=t.get(T);return r.snapshot.queryParams.returnUrl||s.redirectUrl||"/"}const{maxLength:X,required:W}=i.Validators;let U=(()=>{var t;class r{constructor(o,n,c,b,m){this.injector=o,this.fb=n,this.toasterService=c,this.authService=b,this.configState=m,this.isSelfRegistrationEnabled=!0,this.authWrapperKey="Account.AuthWrapperComponent"}ngOnInit(){this.init(),this.buildForm()}init(){this.isSelfRegistrationEnabled="false"!==(this.configState.getSetting("Abp.Account.IsSelfRegistrationEnabled")||"").toLowerCase()}buildForm(){this.form=this.fb.group({username:["",[W,X(255)]],password:["",[W,X(128)]],rememberMe:[!1]})}onSubmit(){if(this.form.invalid)return;this.inProgress=!0;const{username:o,password:n,rememberMe:c}=this.form.value,b=H(this.injector);this.authService.login({username:o,password:n,rememberMe:c,redirectUrl:b}).pipe((0,Q.K)(m=>(this.toasterService.error(m.error?.error_description||m.error?.error.message||"AbpAccount::DefaultErrorMessage","",{life:7e3}),(0,V._)(m))),(0,v.x)(()=>this.inProgress=!1)).subscribe()}}return(t=r).\u0275fac=function(o){return new(o||t)(e.Y36(e.zs3),e.Y36(i.QS),e.Y36(u.MJ),e.Y36(a.e80),e.Y36(a.XJE))},t.\u0275cmp=e.Xpm({type:t,selectors:[["abp-login"]],decls:29,vars:21,consts:[[4,"ngIf"],["validateOnSubmit","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"mb-3","form-group"],["for","login-input-user-name-or-email-address",1,"form-label"],["type","text","id","login-input-user-name-or-email-address","formControlName","username","autocomplete","username","autofocus","",1,"form-control"],["for","login-input-password",1,"form-label"],["type","password","id","login-input-password","formControlName","password","autocomplete","current-password",1,"form-control"],[1,"row"],[1,"col"],[1,"form-check"],["for","login-input-remember-me",1,"form-check-label","mb-2"],["type","checkbox","id","login-input-remember-me","formControlName","rememberMe",1,"form-check-input"],[1,"text-end","col"],["routerLink","/account/forgot-password"],["buttonType","submit","name","Action","buttonClass","btn-block btn-lg mt-3 btn btn-primary",3,"loading"],["routerLink","/account/register","queryParamsHandling","preserve",1,"text-decoration-none"]],template:function(o,n){1&o&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.YNc(3,be,6,6,"strong",0),e.TgZ(4,"form",1),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(5,"div",2)(6,"label",3),e._uU(7),e.ALo(8,"abpLocalization"),e.qZA(),e._UZ(9,"input",4),e.qZA(),e.TgZ(10,"div",2)(11,"label",5),e._uU(12),e.ALo(13,"abpLocalization"),e.qZA(),e._UZ(14,"input",6),e.qZA(),e.TgZ(15,"div",7)(16,"div",8)(17,"div",9)(18,"label",10),e._UZ(19,"input",11),e._uU(20),e.ALo(21,"abpLocalization"),e.qZA()()(),e.TgZ(22,"div",12)(23,"a",13),e._uU(24),e.ALo(25,"abpLocalization"),e.qZA()()(),e.TgZ(26,"abp-button",14),e._uU(27),e.ALo(28,"abpLocalization"),e.qZA()()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,9,"AbpAccount::Login")),e.xp6(2),e.Q6J("ngIf",n.isSelfRegistrationEnabled),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(3),e.Oqu(e.lcZ(8,11,"AbpAccount::UserNameOrEmailAddress")),e.xp6(5),e.Oqu(e.lcZ(13,13,"AbpAccount::Password")),e.xp6(8),e.hij(" ",e.lcZ(21,15,"AbpAccount::RememberMe")," "),e.xp6(4),e.Oqu(e.lcZ(25,17,"AbpAccount::ForgotPassword")),e.xp6(2),e.Q6J("loading",n.inProgress),e.xp6(1),e.hij(" ",e.lcZ(28,19,"AbpAccount::Login")," "))},dependencies:[h.O5,i._Y,i.Fj,i.Wl,i.JJ,i.JL,i.sg,i.u,g.rH,a.Uqp,a.YzZ,p.hL,p.J5,u.r0,a.fuE],encapsulation:2}),r})(),P=(()=>{var t;class r{constructor(){this.store=new a.gSB({})}get createOnUpdateStream(){return this.store.sliceUpdate}getProfile$(){return this.store.sliceState(o=>o.profile)}getProfile(){return this.store.state.profile}setProfile(o){this.store.patch({profile:o})}}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();const{required:y}=i.Validators,ee=["newPassword","repeatNewPassword"];let q=(()=>{var t;class r{constructor(o,n,c,b,m){this.fb=o,this.injector=n,this.toasterService=c,this.profileService=b,this.manageProfileState=m,this.mapErrorsFn=(_,w,Z)=>ee.indexOf(String(Z?.name))<0?_:_.concat(w.filter(({key:j})=>"passwordMismatch"===j))}ngOnInit(){this.hideCurrentPassword=!this.manageProfileState.getProfile()?.hasPassword;const o=(0,u.dD)(this.injector);this.form=this.fb.group({password:["",y],newPassword:["",{validators:[y,...o]}],repeatNewPassword:["",{validators:[y,...o]}]},{validators:[(0,p.z)(ee)]}),this.hideCurrentPassword&&this.form.removeControl("password")}onSubmit(){this.form.invalid||(this.inProgress=!0,this.profileService.changePassword({...!this.hideCurrentPassword&&{currentPassword:this.form.get("password")?.value},newPassword:this.form.get("newPassword")?.value}).pipe((0,v.x)(()=>this.inProgress=!1)).subscribe({next:()=>{this.form.reset(),this.toasterService.success("AbpAccount::PasswordChangedMessage","",{life:5e3}),this.hideCurrentPassword&&(this.hideCurrentPassword=!1,this.form.addControl("password",new i.p4("",[y])))},error:o=>{this.toasterService.error(o.error?.error?.message||"AbpAccount::DefaultErrorMessage")}}))}}return(t=r).\u0275fac=function(o){return new(o||t)(e.Y36(i.QS),e.Y36(e.zs3),e.Y36(u.MJ),e.Y36(N),e.Y36(P))},t.\u0275cmp=e.Xpm({type:t,selectors:[["abp-change-password-form"]],exportAs:["abpChangePasswordForm"],decls:19,vars:14,consts:[["validateOnSubmit","",3,"formGroup","mapErrorsFn","ngSubmit"],["class","mb-3 form-group",4,"ngIf"],[1,"mb-3","form-group"],["for","new-password",1,"form-label"],["type","password","id","new-password","formControlName","newPassword","autocomplete","new-password",1,"form-control"],["for","confirm-new-password",1,"form-label"],["type","password","id","confirm-new-password","formControlName","repeatNewPassword","autocomplete","new-password",1,"form-control"],["iconClass","fa fa-check","buttonClass","btn btn-primary color-white","buttonType","submit",3,"loading","disabled"],["for","current-password",1,"form-label"],["type","password","id","current-password","formControlName","password","autofocus","","autocomplete","current-password",1,"form-control"]],template:function(o,n){1&o&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.YNc(1,he,7,3,"div",1),e.TgZ(2,"div",2)(3,"label",3),e._uU(4),e.ALo(5,"abpLocalization"),e.qZA(),e.TgZ(6,"span"),e._uU(7," * "),e.qZA(),e._UZ(8,"input",4),e.qZA(),e.TgZ(9,"div",2)(10,"label",5),e._uU(11),e.ALo(12,"abpLocalization"),e.qZA(),e.TgZ(13,"span"),e._uU(14," * "),e.qZA(),e._UZ(15,"input",6),e.qZA(),e.TgZ(16,"abp-button",7),e._uU(17),e.ALo(18,"abpLocalization"),e.qZA()()),2&o&&(e.Q6J("formGroup",n.form)("mapErrorsFn",n.mapErrorsFn),e.xp6(1),e.Q6J("ngIf",!n.hideCurrentPassword),e.xp6(3),e.Oqu(e.lcZ(5,8,"AbpIdentity::DisplayName:NewPassword")),e.xp6(7),e.Oqu(e.lcZ(12,10,"AbpIdentity::DisplayName:NewPasswordConfirm")),e.xp6(5),e.Q6J("loading",n.inProgress)("disabled",null==n.form?null:n.form.invalid),e.xp6(1),e.Oqu(e.lcZ(18,12,"AbpIdentity::Save")))},dependencies:[h.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,a.Uqp,a.YzZ,p.hL,p.J5,u.r0,a.fuE],encapsulation:2}),r})();const M=new e.OlP("RE_LOGIN_CONFIRMATION_TOKEN");let C=(()=>{var t;class r{constructor(o){this.propData=o,this.displayName=o.displayName,this.name=o.name,this.id=o.id||""}}return(t=r).\u0275fac=function(o){return new(o||t)(e.Y36(f.QN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["abp-personal-settings-half-row"]],features:[e._Bn([],[f.YJ])],decls:5,vars:7,consts:[[1,"w-50","d-inline"],[1,"form-label"],["type","text",1,"form-control",3,"formControlName"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"label",1),e._uU(2),e.ALo(3,"abpLocalization"),e.qZA(),e._UZ(4,"input",2),e.qZA()),2&o&&(e.xp6(1),e.uIk("for",n.name),e.xp6(1),e.hij("",e.lcZ(3,5,n.displayName)," "),e.xp6(2),e.Q6J("formControlName",n.name),e.uIk("id",n.id)("name",n.name))},dependencies:[i.Fj,i.JJ,i.u,p.J5,a.fuE],encapsulation:2}),r})();const{maxLength:S,required:te,email:Le}=i.Validators,oe={"Account.PersonalSettingsComponent":f.Od.createMany([{type:"string",name:"userName",displayName:"AbpIdentity::DisplayName:UserName",id:"username",validators:()=>[te,S(256)]},{type:"string",name:"name",displayName:"AbpIdentity::DisplayName:Name",id:"name",validators:()=>[S(64)],template:C,className:"d-inline-block w-50"},{type:"string",name:"surname",displayName:"AbpIdentity::DisplayName:Surname",id:"surname",validators:()=>[S(64)],className:"d-inline-block w-50 ps-4",template:C},{type:"string",name:"email",displayName:"AbpIdentity::DisplayName:Email",id:"email-address",validators:()=>[te,Le,S(256)]},{type:"string",name:"phoneNumber",displayName:"AbpIdentity::DisplayName:PhoneNumber",id:"phone-number",validators:()=>[S(16)]}])},I=new e.OlP("ACCOUNT_EDIT_FORM_PROP_CONTRIBUTORS");let F=(()=>{var t;class r{constructor(o,n,c,b,m,_,w,Z){this.fb=o,this.toasterService=n,this.profileService=c,this.manageProfileState=b,this.authService=m,this.confirmationService=_,this.isPersonalSettingsChangedConfirmationActive=w,this.injector=Z,this.logoutConfirmation=()=>{this.authService.logout().subscribe()}}buildForm(){if(this.selected=this.manageProfileState.getProfile(),!this.selected)return;const o=new f.lg(this.injector,this.selected);this.form=(0,f.se)(o)}ngOnInit(){this.buildForm()}submit(){if(this.form.invalid)return;const o=this.isLogoutConfirmMessageActive();this.inProgress=!0,this.profileService.update(this.form.value).pipe((0,v.x)(()=>this.inProgress=!1)).subscribe(n=>{this.manageProfileState.setProfile(n),this.toasterService.success("AbpAccount::PersonalSettingsSaved","Success",{life:5e3}),o&&this.showLogoutConfirmMessage()})}isLogoutConfirmMessageActive(){return this.isPersonalSettingsChangedConfirmationActive}showLogoutConfirmMessage(){this.confirmationService.info("AbpAccount::PersonalSettingsChangedConfirmationModalDescription","AbpAccount::PersonalSettingsChangedConfirmationModalTitle").pipe((0,pe.h)(o=>o===u.Tv.Status.confirm)).subscribe(this.logoutConfirmation)}}return(t=r).\u0275fac=function(o){return new(o||t)(e.Y36(i.QS),e.Y36(u.MJ),e.Y36(N),e.Y36(P),e.Y36(a.e80),e.Y36(u.YP),e.Y36(M),e.Y36(e.zs3))},t.\u0275cmp=e.Xpm({type:t,selectors:[["abp-personal-settings-form"]],exportAs:["abpPersonalSettingsForm"],features:[e._Bn([{provide:f.ex,useValue:"Account.PersonalSettingsComponent"}])],decls:1,vars:1,consts:[["validateOnSubmit","",3,"formGroup","ngSubmit",4,"ngIf"],["validateOnSubmit","",3,"formGroup","ngSubmit"],[3,"selectedRecord"],["buttonType","submit","iconClass","fa fa-check","buttonClass","btn btn-primary color-white",3,"loading"]],template:function(o,n){1&o&&e.YNc(0,_e,5,6,"form",0),2&o&&e.Q6J("ngIf",n.form)},dependencies:[h.O5,i._Y,i.JL,i.sg,a.YzZ,p.hL,u.r0,f.gt,a.fuE],encapsulation:2}),r})(),R=(()=>{var t;class r{constructor(o,n){this.profileService=o,this.manageProfileState=n,this.selectedTab=0,this.changePasswordKey="Account.ChangePasswordComponent",this.personalSettingsKey="Account.PersonalSettingsComponent",this.profile$=this.manageProfileState.getProfile$()}ngOnInit(){this.profileService.get().subscribe(o=>{this.manageProfileState.setProfile(o),o.isExternal&&(this.hideChangePasswordTab=!0,this.selectedTab=1)})}}return(t=r).\u0275fac=function(o){return new(o||t)(e.Y36(N),e.Y36(P))},t.\u0275cmp=e.Xpm({type:t,selectors:[["abp-manage-profile"]],decls:15,vars:15,consts:[["id","AbpContentToolbar"],[1,"card","border-0","shadow-sm","min-h-400",3,"abpLoading"],[1,"card-body"],[1,"row"],[1,"col-12","col-md-3"],["id","nav-tab","role","tablist",1,"nav","flex-column","nav-pills"],["class","nav-item",3,"click",4,"ngIf"],[1,"nav-item","mb-2",3,"click"],["role","tab","href","javascript:void(0)",1,"nav-link",3,"ngClass"],["class","col-12 col-md-9",4,"ngIf"],[1,"nav-item",3,"click"],[1,"col-12","col-md-9"],["class","tab-content",4,"ngIf"],[1,"tab-content"],["role","tabpanel",1,"tab-pane","active"],[4,"abpReplaceableTemplate"]],template:function(o,n){if(1&o&&(e._UZ(0,"div",0),e.TgZ(1,"div",1),e.ALo(2,"async"),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"ul",5),e.YNc(7,Ae,4,6,"li",6),e.ALo(8,"async"),e.TgZ(9,"li",7),e.NdJ("click",function(){return n.selectedTab=1}),e.TgZ(10,"a",8),e._uU(11),e.ALo(12,"abpLocalization"),e.qZA()()()(),e.YNc(13,Te,3,2,"div",9),e.ALo(14,"async"),e.qZA()()()),2&o){let c;e.xp6(1),e.Q6J("abpLoading",!(null!=(c=e.lcZ(2,5,n.profile$))&&c.userName)),e.xp6(6),e.Q6J("ngIf",!n.hideChangePasswordTab&&e.lcZ(8,7,n.profile$)),e.xp6(3),e.Q6J("ngClass",e.VKq(13,K,1===n.selectedTab)),e.xp6(1),e.Oqu(e.lcZ(12,9,"AbpAccount::PersonalSettings")),e.xp6(2),e.Q6J("ngIf",e.lcZ(14,11,n.profile$))}},dependencies:[h.mk,h.O5,a.zLP,u.TH,q,F,h.Ov,a.fuE],styles:[".min-h-400[_ngcontent-%COMP%]{min-height:400px}"],data:{animation:[(0,O.X$)("fadeIn",[(0,O.eR)(":enter",(0,O._7)(u.Ji))])]}}),r})();const{maxLength:Oe,required:J,email:xe}=i.Validators;let E=(()=>{var t;class r{constructor(o,n,c,b,m,_){this.fb=o,this.accountService=n,this.configState=c,this.toasterService=b,this.authService=m,this.injector=_,this.isSelfRegistrationEnabled=!0,this.authWrapperKey="Account.AuthWrapperComponent"}ngOnInit(){this.init(),this.buildForm()}init(){this.isSelfRegistrationEnabled="false"!==(this.configState.getSetting("Abp.Account.IsSelfRegistrationEnabled")||"").toLowerCase(),this.isSelfRegistrationEnabled||this.toasterService.warn({key:"AbpAccount::SelfRegistrationDisabledMessage",defaultValue:"Self registration is disabled."},"",{life:1e4})}buildForm(){this.form=this.fb.group({username:["",[J,Oe(255)]],password:["",[J,...(0,u.dD)(this.injector)]],email:["",[J,xe]]})}onSubmit(){if(this.form.invalid)return;this.inProgress=!0;const o={userName:this.form.get("username")?.value,password:this.form.get("password")?.value,emailAddress:this.form.get("email")?.value,appName:"Angular"};this.accountService.register(o).pipe((0,de.w)(()=>this.authService.login({username:o.userName,password:o.password,redirectUrl:H(this.injector)})),(0,Q.K)(n=>(this.toasterService.error(n.error?.error_description||n.error?.error.message||"AbpAccount::DefaultErrorMessage","",{life:7e3}),(0,V._)(n))),(0,v.x)(()=>this.inProgress=!1)).subscribe()}}return(t=r).\u0275fac=function(o){return new(o||t)(e.Y36(i.QS),e.Y36(L),e.Y36(a.XJE),e.Y36(u.MJ),e.Y36(a.e80),e.Y36(e.zs3))},t.\u0275cmp=e.Xpm({type:t,selectors:[["abp-register"]],decls:10,vars:10,consts:[["routerLink","/account/login",1,"text-decoration-none"],["validateOnSubmit","","class","mt-4",3,"formGroup","ngSubmit",4,"ngIf"],["validateOnSubmit","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"mb-3","form-group"],["for","input-user-name",1,"form-label"],["autofocus","","type","text","id","input-user-name","formControlName","username","autocomplete","username",1,"form-control"],["for","input-email-address",1,"form-label"],["type","email","id","input-email-address","formControlName","email",1,"form-control"],["for","input-password",1,"form-label"],["type","password","id","input-password","formControlName","password","autocomplete","current-password",1,"form-control"],["buttonType","submit","name","Action","buttonClass","btn-block btn-lg mt-3 btn btn-primary",3,"loading"]],template:function(o,n){1&o&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.TgZ(3,"strong"),e._uU(4),e.ALo(5,"abpLocalization"),e.TgZ(6,"a",0),e._uU(7),e.ALo(8,"abpLocalization"),e.qZA()(),e.YNc(9,Pe,25,14,"form",1)),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,4,"AbpAccount::Register")),e.xp6(3),e.hij(" ",e.lcZ(5,6,"AbpAccount::AlreadyRegistered")," "),e.xp6(3),e.Oqu(e.lcZ(8,8,"AbpAccount::Login")),e.xp6(2),e.Q6J("ngIf",n.isSelfRegistrationEnabled))},dependencies:[h.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,g.rH,a.Uqp,a.YzZ,p.hL,p.J5,u.r0,a.fuE],encapsulation:2}),r})();const ne=["password","confirmPassword"];let z=(()=>{var t;class r{constructor(o,n,c,b,m){this.fb=o,this.accountService=n,this.route=c,this.router=b,this.injector=m,this.inProgress=!1,this.isPasswordReset=!1,this.mapErrorsFn=(_,w,Z)=>ne.indexOf(String(Z?.name))<0?_:_.concat(w.filter(({key:j})=>"passwordMismatch"===j))}ngOnInit(){this.route.queryParams.subscribe(({userId:o,resetToken:n})=>{(!o||!n)&&this.router.navigateByUrl("/account/login"),this.form=this.fb.group({userId:[o,[i.Validators.required]],resetToken:[n,[i.Validators.required]],password:["",[i.Validators.required,...(0,u.dD)(this.injector)]],confirmPassword:["",[i.Validators.required,...(0,u.dD)(this.injector)]]},{validators:[(0,p.z)(ne)]})})}onSubmit(){this.form.invalid||this.inProgress||(this.inProgress=!0,this.accountService.resetPassword({userId:this.form.get("userId")?.value,resetToken:this.form.get("resetToken")?.value,password:this.form.get("password")?.value}).pipe((0,v.x)(()=>this.inProgress=!1)).subscribe(()=>{this.isPasswordReset=!0}))}}return(t=r).\u0275fac=function(o){return new(o||t)(e.Y36(i.QS),e.Y36(L),e.Y36(g.gz),e.Y36(g.F0),e.Y36(e.zs3))},t.\u0275cmp=e.Xpm({type:t,selectors:[["abp-reset-password"]],decls:6,vars:5,consts:[["validateOnSubmit","",3,"formGroup","mapErrorsFn","ngSubmit",4,"ngIf","ngIfElse"],["passwordResetTemplate",""],["validateOnSubmit","",3,"formGroup","mapErrorsFn","ngSubmit"],[1,"mb-3","form-group"],["for","input-password",1,"form-label"],["type","password","id","input-password","formControlName","password",1,"form-control"],["for","input-confirm-password",1,"form-label"],["type","password","id","input-confirm-password","formControlName","confirmPassword",1,"form-control"],["type","button","routerLink","/account/login",1,"me-2","btn","btn-secondary"],["buttonType","submit","buttonClass","me-2 btn btn-primary",3,"loading","click"],["routerLink","/account/login"],[1,"d-block","mt-2","mb-3","btn","btn-primary"]],template:function(o,n){if(1&o&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.YNc(3,ye,24,18,"form",0),e.YNc(4,Ce,7,6,"ng-template",null,1,e.W1O)),2&o){const c=e.MAs(5);e.xp6(1),e.Oqu(e.lcZ(2,3,"AbpAccount::ResetPassword")),e.xp6(2),e.Q6J("ngIf",!n.isPasswordReset)("ngIfElse",c)}},dependencies:[h.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,g.rH,a.YzZ,p.hL,p.J5,u.r0,a.fuE],encapsulation:2}),r})(),Y=(()=>{var t;class r{constructor(){this.authService=(0,e.f3M)(a.e80)}canActivate(){return!!this.authService.isInternalAuth||(this.authService.navigateToLogin(),!1)}}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),r})(),D=(()=>{var t;class r{constructor(){this.configState=(0,e.f3M)(a.XJE),this.extensions=(0,e.f3M)(f.X6)}canActivate(){const n=(0,e.f3M)(I,{optional:!0})||{};return(0,f.ot)(this.configState,"Identity").pipe((0,$.U)(c=>({"Account.PersonalSettingsComponent":c.User})),(0,f.V_)(this.configState,"AbpIdentity"),(0,me.b)(c=>{(0,f.Hp)(this.extensions.editFormProps,oe,c.editForm,n)}),(0,$.U)(()=>!0))}}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),r})();const k=(0,g.BJ)([Y]),Ue=[{path:"",pathMatch:"full",redirectTo:"login"},{path:"",component:a.O39,children:[{path:"login",component:a.c$y,canActivate:k,data:{replaceableComponent:{key:"Account.LoginComponent",defaultComponent:U}}},{path:"register",component:a.c$y,canActivate:k,data:{replaceableComponent:{key:"Account.RegisterComponent",defaultComponent:E}}},{path:"forgot-password",component:a.c$y,canActivate:k,data:{replaceableComponent:{key:"Account.ForgotPasswordComponent",defaultComponent:x}}},{path:"reset-password",component:a.c$y,canActivate:[],data:{tenantBoxVisible:!1,replaceableComponent:{key:"Account.ResetPasswordComponent",defaultComponent:z}}},{path:"manage",component:a.c$y,canActivate:(0,g.BJ)([a.a1M,D]),data:{replaceableComponent:{key:"Account.ManageProfileComponent",defaultComponent:R}}}]}];let qe=(()=>{var t;class r{}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.Bz.forChild(Ue),g.Bz]}),r})();function Me(t){return{redirectUrl:"/",...t}}let Ie=(()=>{var t;class r{static forChild(o={}){return{ngModule:r,providers:[Y,{provide:T,useValue:o},{provide:"ACCOUNT_OPTIONS",useFactory:Me,deps:[T]},{provide:M,useValue:o.isPersonalSettingsChangedConfirmationActive??!0},{provide:I,useValue:o.editFormPropContributors},D]}}static forLazy(o={}){return new a.Cgl(r.forChild(o))}}return(t=r).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[a.IR2,qe,u.e2,se.XC,p.h2,f.Ms]}),r})()}}]);