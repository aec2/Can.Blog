"use strict";(self.webpackChunkBlog=self.webpackChunkBlog||[]).push([[515],{1515:(ae,v,r)=>{r.r(v),r.d(v,{DEFAULT_TENANT_MANAGEMENT_CREATE_FORM_PROPS:()=>D,DEFAULT_TENANT_MANAGEMENT_EDIT_FORM_PROPS:()=>L,DEFAULT_TENANT_MANAGEMENT_ENTITY_ACTIONS:()=>F,DEFAULT_TENANT_MANAGEMENT_ENTITY_PROPS:()=>I,DEFAULT_TENANT_MANAGEMENT_TOOLBAR_ACTIONS:()=>P,TENANT_MANAGEMENT_CREATE_FORM_PROP_CONTRIBUTORS:()=>M,TENANT_MANAGEMENT_EDIT_FORM_PROP_CONTRIBUTORS:()=>E,TENANT_MANAGEMENT_ENTITY_ACTION_CONTRIBUTORS:()=>_,TENANT_MANAGEMENT_ENTITY_PROP_CONTRIBUTORS:()=>g,TENANT_MANAGEMENT_TOOLBAR_ACTION_CONTRIBUTORS:()=>A,TenantManagementExtensionsGuard:()=>h,TenantManagementModule:()=>ne,TenantsComponent:()=>u});var T=r(6973),e=r(2223);let U=(()=>{var t;class i{constructor(n){this.restService=n,this.apiName="AbpTenantManagement",this.create=a=>this.restService.request({method:"POST",url:"/api/multi-tenancy/tenants",body:a},{apiName:this.apiName}),this.delete=a=>this.restService.request({method:"DELETE",url:`/api/multi-tenancy/tenants/${a}`},{apiName:this.apiName}),this.deleteDefaultConnectionString=a=>this.restService.request({method:"DELETE",url:`/api/multi-tenancy/tenants/${a}/default-connection-string`},{apiName:this.apiName}),this.get=a=>this.restService.request({method:"GET",url:`/api/multi-tenancy/tenants/${a}`},{apiName:this.apiName}),this.getDefaultConnectionString=a=>this.restService.request({method:"GET",responseType:"text",url:`/api/multi-tenancy/tenants/${a}/default-connection-string`},{apiName:this.apiName}),this.getList=a=>this.restService.request({method:"GET",url:"/api/multi-tenancy/tenants",params:{filter:a.filter,sorting:a.sorting,skipCount:a.skipCount,maxResultCount:a.maxResultCount}},{apiName:this.apiName}),this.update=(a,l)=>this.restService.request({method:"PUT",url:`/api/multi-tenancy/tenants/${a}`,body:l},{apiName:this.apiName}),this.updateDefaultConnectionString=(a,l)=>this.restService.request({method:"PUT",url:`/api/multi-tenancy/tenants/${a}/default-connection-string`,params:{defaultConnectionString:l}},{apiName:this.apiName})}}return(t=i).\u0275fac=function(n){return new(n||t)(e.LFG(T.vgb))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),i})();var m=r(6104),o=r(9338),c=r(5030),G=r(8746),O=r(4004),B=r(8505),C=r(4115),R=r(9752),y=r(2857),x=r(5434),N=r(672);function Y(t,i){if(1&t&&(e.TgZ(0,"h3"),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,null!=s.selected&&s.selected.id?"AbpTenantManagement::Edit":"AbpTenantManagement::NewTenant")," ")}}function Z(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"form",12),e.NdJ("ngSubmit",function(){e.CHM(s);const a=e.oxw();return e.KtG(a.save())}),e._UZ(1,"abp-extensible-form",13),e.qZA()}if(2&t){const s=e.oxw();e.Q6J("formGroup",s.tenantForm)("validateOnSubmit",!0),e.xp6(1),e.Q6J("selectedRecord",s.selected)}}function V(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",14),e._uU(1),e.ALo(2,"abpLocalization"),e.qZA(),e.TgZ(3,"abp-button",15),e.NdJ("click",function(){e.CHM(s);const a=e.oxw();return e.KtG(a.save())}),e._uU(4),e.ALo(5,"abpLocalization"),e.qZA()}if(2&t){const s=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,3,"AbpTenantManagement::Cancel")," "),e.xp6(2),e.Q6J("disabled",null==s.tenantForm?null:s.tenantForm.invalid),e.xp6(1),e.Oqu(e.lcZ(5,5,"AbpTenantManagement::Save"))}}function J(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"abp-feature-management",16),e.NdJ("visibleChange",function(a){e.CHM(s);const l=e.oxw();return e.KtG(l.visibleFeatures=a)}),e.qZA()}if(2&t){const s=e.oxw();e.Q6J("visible",s.visibleFeatures)("providerKey",s.providerKey)}}const w=function(){return[]},K=function(){return{value:"T"}},z=function(t){return{value:t}},Q=function(t){return{value:t,twoWay:!0}},q=function(t,i,s){return{providerName:t,providerKey:i,visible:s}},j=function(t){return{visibleChange:t}},$=function(t,i,s){return{inputs:t,outputs:i,componentKey:s}};let u=(()=>{var t;class i{get hasSelectedTenant(){return!!this.selected.id}constructor(n,a,l,d,b,f){this.list=n,this.injector=a,this.confirmationService=l,this.service=d,this.toasterService=b,this.fb=f,this.data={items:[],totalCount:0},this.visibleFeatures=!1,this.modalBusy=!1,this.featureManagementKey="FeatureManagement.FeatureManagementComponent",this.onVisibleFeaturesChange=p=>{this.visibleFeatures=p}}ngOnInit(){this.hookToQuery()}createTenantForm(){const n=new o.lg(this.injector,this.selected);this.tenantForm=(0,o.se)(n)}addTenant(){this.selected={},this.createTenantForm(),this.isModalVisible=!0}editTenant(n){this.service.get(n).subscribe(a=>{this.selected=a,this.createTenantForm(),this.isModalVisible=!0})}save(){if(!this.tenantForm.valid||this.modalBusy)return;this.modalBusy=!0;const{id:n}=this.selected;(n?this.service.update(n,{...this.selected,...this.tenantForm.value}):this.service.create(this.tenantForm.value)).pipe((0,G.x)(()=>this.modalBusy=!1)).subscribe(()=>{this.isModalVisible=!1,this.list.get()})}delete(n,a){this.confirmationService.warn("AbpTenantManagement::TenantDeletionConfirmationMessage","AbpTenantManagement::AreYouSure",{messageLocalizationParams:[a]}).subscribe(l=>{l===m.Tv.Status.confirm&&(this.toasterService.success("AbpUi::SuccessfullyDeleted"),this.service.delete(n).subscribe(()=>this.list.get()))})}hookToQuery(){this.list.hookToQuery(n=>this.service.getList(n)).subscribe(n=>{this.data=n})}onSharedDatabaseChange(n){n||setTimeout(()=>{const a=document.getElementById("defaultConnectionString");a&&a.focus()},0)}openFeaturesModal(n){this.providerKey=n,setTimeout(()=>{this.visibleFeatures=!0},0)}sort(n){const{prop:a,dir:l}=n.sorts[0];this.list.sortKey=a,this.list.sortOrder=l}}return(t=i).\u0275fac=function(n){return new(n||t)(e.Y36(T.XNV),e.Y36(e.zs3),e.Y36(m.YP),e.Y36(U),e.Y36(m.MJ),e.Y36(c.QS))},t.\u0275cmp=e.Xpm({type:t,selectors:[["abp-tenants"]],features:[e._Bn([T.XNV,{provide:o.ex,useValue:"TenantManagement.TenantsComponent"}])],decls:17,vars:30,consts:[[3,"title","toolbar"],["id","wrapper",1,"card"],[1,"card-body"],["id","data-tables-table-filter",1,"data-tables-filter","mb-3"],[1,"input-group"],["type","search",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[3,"data","recordsTotal","list"],[3,"visible","busy","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],["providerName","T",3,"visible","providerKey","visibleChange",4,"abpReplaceableTemplate"],[3,"formGroup","validateOnSubmit","ngSubmit"],[3,"selectedRecord"],["abpClose","","type","button",1,"btn","btn-secondary"],["iconClass","fa fa-check",3,"disabled","click"],["providerName","T",3,"visible","providerKey","visibleChange"]],template:function(n,a){1&n&&(e.TgZ(0,"abp-page",0),e.ALo(1,"abpLocalization"),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"input",5),e.NdJ("ngModelChange",function(d){return a.list.filter=d}),e.ALo(7,"abpLocalization"),e.qZA()()(),e._UZ(8,"abp-extensible-table",6),e.qZA()(),e.TgZ(9,"abp-modal",7),e.NdJ("visibleChange",function(d){return a.isModalVisible=d}),e.YNc(10,Y,3,3,"ng-template",null,8,e.W1O),e.YNc(12,Z,2,3,"ng-template",null,9,e.W1O),e.YNc(14,V,6,7,"ng-template",null,10,e.W1O),e.qZA(),e.YNc(16,J,1,2,"abp-feature-management",11),e.qZA()),2&n&&(e.Q6J("title",e.lcZ(1,10,"AbpTenantManagement::Tenants"))("toolbar",a.data.items),e.xp6(6),e.Q6J("placeholder",e.lcZ(7,12,"AbpUi::PagerSearch"))("ngModel",a.list.filter),e.xp6(2),e.Q6J("data",a.data.items||e.DdM(14,w))("recordsTotal",a.data.totalCount||0)("list",a.list),e.xp6(1),e.Q6J("visible",a.isModalVisible)("busy",a.modalBusy),e.xp6(7),e.Q6J("abpReplaceableTemplate",e.kEZ(26,$,e.kEZ(20,q,e.DdM(15,K),e.VKq(16,z,a.providerKey),e.VKq(18,Q,a.visibleFeatures)),e.VKq(24,j,a.onVisibleFeaturesChange),a.featureManagementKey)))},dependencies:[C.hL,c._Y,c.Fj,c.JJ,c.JL,c.On,c.sg,T.YzZ,T.zLP,m.r0,m.zS,m.YM,R.$,o.gt,o.m5,y.II,T.fuE],encapsulation:2}),i})();const H=o.uk.createMany([{text:"AbpTenantManagement::Edit",action:t=>{t.getInjected(u).editTenant(t.record.id)},permission:"AbpTenantManagement.Tenants.Update"},{text:"AbpTenantManagement::Permission:ManageFeatures",action:t=>{t.getInjected(u).openFeaturesModal(t.record.id)},permission:"AbpTenantManagement.Tenants.ManageFeatures"},{text:"AbpTenantManagement::Delete",action:t=>{t.getInjected(u).delete(t.record.id,t.record.name)},permission:"AbpTenantManagement.Tenants.Delete"}]),X=o.QC.createMany([{type:"string",name:"name",displayName:"AbpTenantManagement::TenantName",sortable:!0}]),S=o.Od.createMany([{type:"string",name:"name",id:"name",displayName:"AbpTenantManagement::TenantName",validators:()=>[c.Validators.required,c.Validators.maxLength(256)]},{type:"email",name:"adminEmailAddress",displayName:"AbpTenantManagement::DisplayName:AdminEmailAddress",id:"admin-email-address",validators:()=>[c.Validators.required,c.Validators.maxLength(256),c.Validators.email]},{type:"passwordinputgroup",name:"adminPassword",displayName:"AbpTenantManagement::DisplayName:AdminPassword",id:"admin-password",autocomplete:"new-password",validators:t=>[c.Validators.required,...(0,m.dD)({get:t.getInjected})]}]),k=S.slice(0,1),W=o.JE.createMany([{text:"AbpTenantManagement::NewTenant",action:t=>{t.getInjected(u).addTenant()},permission:"AbpTenantManagement.Tenants.Create",icon:"fa fa-plus"}]),F={"TenantManagement.TenantsComponent":H},P={"TenantManagement.TenantsComponent":W},I={"TenantManagement.TenantsComponent":X},D={"TenantManagement.TenantsComponent":S},L={"TenantManagement.TenantsComponent":k},_=new e.OlP("TENANT_MANAGEMENT_ENTITY_ACTION_CONTRIBUTORS"),A=new e.OlP("TENANT_MANAGEMENT_TOOLBAR_ACTION_CONTRIBUTORS"),g=new e.OlP("TENANT_MANAGEMENT_ENTITY_PROP_CONTRIBUTORS"),M=new e.OlP("TENANT_MANAGEMENT_CREATE_FORM_PROP_CONTRIBUTORS"),E=new e.OlP("TENANT_MANAGEMENT_EDIT_FORM_PROP_CONTRIBUTORS");let h=(()=>{var t;class i{constructor(){this.configState=(0,e.f3M)(T.XJE),this.extensions=(0,e.f3M)(o.X6)}canActivate(){const n={optional:!0},a=(0,e.f3M)(_,n)||{},l=(0,e.f3M)(A,n)||{},d=(0,e.f3M)(g,n)||{},b=(0,e.f3M)(M,n)||{},f=(0,e.f3M)(E,n)||{};return(0,o.ot)(this.configState,"TenantManagement").pipe((0,O.U)(p=>({"TenantManagement.TenantsComponent":p.Tenant})),(0,o.V_)(this.configState,"TenantManagement"),(0,B.b)(p=>{(0,o.Fr)(this.extensions.entityActions,F,a),(0,o.Fr)(this.extensions.toolbarActions,P,l),(0,o.Hp)(this.extensions.entityProps,I,p.prop,d),(0,o.Hp)(this.extensions.createFormProps,D,p.createForm,b),(0,o.Hp)(this.extensions.editFormProps,L,p.editForm,f)}),(0,O.U)(()=>!0))}}return(t=i).\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),i})();const ee=[{path:"",redirectTo:"tenants",pathMatch:"full"},{path:"",component:T.O39,canActivate:(0,N.BJ)([T.a1M,T.nG9,h]),children:[{path:"tenants",component:T.c$y,data:{requiredPolicy:"AbpTenantManagement.Tenants",replaceableComponent:{key:"TenantManagement.TenantsComponent",defaultComponent:u}}}]}];let te=(()=>{var t;class i{}return(t=i).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[N.Bz.forChild(ee),N.Bz]}),i})(),ne=(()=>{var t;class i{static forChild(n={}){return{ngModule:i,providers:[{provide:_,useValue:n.entityActionContributors},{provide:A,useValue:n.toolbarActionContributors},{provide:g,useValue:n.entityPropContributors},{provide:M,useValue:n.createFormPropContributors},{provide:E,useValue:n.editFormPropContributors},h]}}static forLazy(n={}){return new T.Cgl(i.forChild(n))}}return(t=i).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[te,C.h2,T.IR2,m.e2,x.XC,R.XE,o.Ms,y.BG]}),i})()}}]);